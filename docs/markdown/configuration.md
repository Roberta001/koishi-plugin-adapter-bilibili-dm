# 配置指南

## 配置项说明

### config.selfId

**类型**: `string` (必需)  
**描述**: 要登录的账号UID

如何查找UID？[点我查看方法](https://github.com/Roberta001/koishi-plugin-adapter-bilibili-dm/blob/main/readme.md#%EF%B8%8F-%E9%85%8D%E7%BD%AE)

### config.avatarBase64

**类型**: `boolean`  
**默认值**: `true`  
**描述**: 请求base64头像数据以解决控制台显示问题

启用此选项会将用户头像转换为 Base64 格式，解决跨域显示问题，但会增加内存使用量。

### config.pollInterval

**类型**: `number`  
**默认值**: `3000`  
**范围**: `1000` - `60000`  
**单位**: 毫秒  
**描述**: 轮询消息的间隔时间

较小的值可以更快接收消息，但会增加服务器负载。建议保持默认值。

### config.maxCacheSize

**类型**: `number`  
**默认值**: `1000`  
**单位**: 条  
**描述**: 缓存接收的消息ID，以避免轮询特性导致的消息重复

缓存的消息ID数量，用于去重。较大的值可以更好地避免重复消息，但会占用更多内存。

### config.ignoreOfflineMessages

**类型**: `boolean`  
**默认值**: `true`  
**描述**: 开启后，仅响应机器人上线后的未读消息

否则可能会出现一瞬间响应历史消息的情况。建议保持开启状态。

### config.enableDynamicPolling

**类型**: `boolean`  
**默认值**: `true`  
**描述**: 启用动态监听功能，监听关注UP主的动态更新

开启后会定期检查关注的UP主是否发布了新动态，并触发相应事件。

### config.dynamicPollInterval

**类型**: `number`  
**默认值**: `30`  
**范围**: `10` - `300`  
**单位**: 秒  
**描述**: 动态轮询间隔时间

检查动态更新的频率。较小的值可以更快发现新动态，但会增加API调用频率。

### config.enableLivePolling

**类型**: `boolean`  
**默认值**: `true`  
**描述**: 启用直播监听功能，监听关注UP主的直播状态变化

开启后会定期检查关注的UP主是否开始或结束直播，并触发相应事件。

### config.livePollInterval

**类型**: `number`  
**默认值**: `30`  
**范围**: `10` - `300`  
**单位**: 秒  
**描述**: 直播轮询间隔时间

检查直播状态的频率。较小的值可以更快发现直播状态变化，但会增加API调用频率。

### config.nestedblocked.blockedUids

**类型**: `Array<{name: string, uid: string}>`  
**默认值**: 预设的B站官方账号列表  
**描述**: 私信屏蔽的UID列表

配置需要屏蔽私信的用户UID列表。默认包含B站官方账号，如：
- 哔哩哔哩会员购 (174501086)
- 哔哩哔哩智能机 (12076317)
- 哔哩哔哩活动 (26366366)
- 等等...

可以添加或删除需要屏蔽的用户。

### config.pollFailureThreshold

**类型**: `number`  
**默认值**: `10`  
**范围**: `1` - `29`  
**描述**: 连续轮询失败多少次后增加轮询间隔

当连续轮询失败达到此阈值时，会自动增加轮询间隔以减少服务器压力。

### config.pollAutoShutdownThreshold

**类型**: `number`  
**默认值**: `30`  
**范围**: `30` - `100`  
**描述**: 连续轮询失败多少次后自动关闭插件

当连续轮询失败达到此阈值时，插件会自动关闭以避免持续的错误。通常是由于Cookie失效或网络问题导致。

### config.loggerinfo

**类型**: `boolean`  
**默认值**: `false`  
**标记**: 实验性功能  
**描述**: 日志调试模式

开启后会输出详细的调试日志，用于问题排查。仅在遇到问题时建议开启。


